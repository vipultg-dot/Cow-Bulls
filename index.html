<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cows & Bulls ‚Äî 5-Digit</title>
  <style>
    :root{
      --bg:#0e1116; --panel:#151a22; --panel2:#1b222d; --border:#263244;
      --text:#e9edf2; --muted:#a8b3bf; --accent:#4f8cff; --ok:#22c55e; --bad:#ef4444; --warn:#f59e0b;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      color:var(--text);
      background: radial-gradient(1200px 700px at 70% -10%, #1a2230 0, var(--bg) 60%);
      display:flex; align-items:center; justify-content:center; padding:24px;
    }
    .shell{width:100%; max-width:820px}
    .card{
      background: linear-gradient(180deg, var(--panel) 0, var(--panel2) 100%);
      border:1px solid var(--border); border-radius:16px; padding:24px;
      box-shadow: 0 12px 50px rgba(0,0,0,.35);
    }
    h1{margin:0 0 4px 0; font-size:28px; letter-spacing:.3px}
    .sub{color:var(--muted); font-size:14px}
    .top{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:18px}
    .toggle{display:inline-flex; align-items:center; gap:10px; cursor:pointer; user-select:none}
    .switch{width:44px; height:24px; border-radius:999px; background:#1a2433; border:1px solid #2c3a52; position:relative}
    .switch:after{content:""; position:absolute; top:50%; left:3px; width:18px; height:18px; border-radius:999px; transform:translateY(-50%); background:#cfd7e2; transition:all .2s}
    .switch.on{background:#203353; border-color:#35558f}
    .switch.on:after{left:23px; background:var(--accent)}
    .row{display:flex; gap:12px; flex-wrap:wrap}
    .inputRow{display:flex; gap:12px; align-items:center; background:#0f151e; border:1px solid var(--border); border-radius:12px; padding:10px}
    input[type="text"]{
      flex:1; font-size:22px; letter-spacing:6px; padding:12px 14px;
      border-radius:10px; border:1px solid #2b3a52; background:#0b1118; color:var(--text); outline:none;
    }
    input[type="text"]:focus{border-color:#3a527a; box-shadow:0 0 0 4px rgba(79,140,255,.14)}
    button{border:0; padding:12px 16px; border-radius:10px; background:var(--accent); color:white; font-weight:600; cursor:pointer}
    button.ghost{background:transparent; color:var(--text); border:1px solid #2b3a52}
    button[disabled]{opacity:.6; cursor:not-allowed}
    .chips{margin-top:10px; display:flex; gap:10px; flex-wrap:wrap}
    .chip{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; background:#0f151e; border:1px solid #27344a; color:var(--muted); font-size:12px}
    .list{margin-top:16px; border:1px solid var(--border); border-radius:12px; overflow:hidden; background:#0e141d}
    .rowItem{display:grid; grid-template-columns:110px 1fr 210px; gap:12px; padding:12px 14px; align-items:center; border-top:1px solid #1b2638}
    .rowItem:first-child{border-top:none}
    .kbd{font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size:16px}
    .badge{display:inline-flex; gap:6px; padding:4px 10px; border-radius:999px; border:1px solid #2a3a52; background:#0d141c; color:var(--muted); font-size:12px}
    .summary{margin-top:16px; padding:14px; background:#0f151e; border:1px solid #27344a; border-radius:12px}
    .win{color:var(--ok); font-weight:700}
    .lose{color:var(--bad); font-weight:700}
    .help{color:var(--muted); font-size:13px}
    .footer{margin-top:16px; color:var(--muted); font-size:12px; display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap}
    @media (max-width:640px){ .rowItem{grid-template-columns:80px 1fr 180px} input[type="text"]{font-size:18px} }
  </style>
</head>
<body>
  <div class="shell">
    <div class="card" id="app"></div>
  </div>

  <!-- React 18 via CDN -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <script>
    // --------- Game Logic ---------
    // 5-digit, first digit 1‚Äì9, repeats allowed
    function generateTarget(){
      let s = String(Math.floor(Math.random()*9)+1);
      for(let i=1;i<5;i++) s += String(Math.floor(Math.random()*10));
      return s;
    }

    // Count with multiplicity
    function countDigits(str){
      const m = {};
      for(const ch of str) m[ch] = (m[ch]||0)+1;
      return m;
    }

    // Score so that COWS INCLUDE BULLS (your rule)
    // - bulls: position matches
    // - totalMatches: sum over digits of min(count in guess, count in target)
    // - cows = totalMatches (so cows >= bulls)
    function scoreGuess(guess, target){
      const g = guess.split(""), t = target.split("");
      let bulls = 0;
      for(let i=0;i<5;i++) if(g[i]===t[i]) bulls++;

      const cg = countDigits(guess), ct = countDigits(target);
      let totalMatches = 0;
      for(const d in cg){
        if(ct[d]) totalMatches += Math.min(cg[d], ct[d]);
      }
      const cows = totalMatches; // includes bulls
      return { cows, bulls };
    }

    function useGame(){
      const [target,setTarget] = React.useState(generateTarget);
      const [attempts,setAttempts] = React.useState([]);
      const [input,setInput] = React.useState("");
      const [hard,setHard] = React.useState(false);
      const [status,setStatus] = React.useState("playing");
      const MAX = 10;

      const reset = ()=>{
        setTarget(generateTarget());
        setAttempts([]); setInput(""); setStatus("playing");
      };

      const submit = ()=>{
        const v = input.trim();
        if(!/^\d{5}$/.test(v)) return;
        if(v[0]==="0") return;
        const res = scoreGuess(v, target);
        const next = [...attempts, { idx: attempts.length+1, guess: v, ...res }];
        setAttempts(next); setInput("");
        if(res.bulls===5) setStatus("won");
        else if(next.length>=MAX) setStatus("lost");
      };

      return {target,attempts,input,setInput,submit,reset,hard,setHard,status,MAX};
    }

    // --------- UI ---------
    function Chip({children}){ return React.createElement('span',{className:'chip'},children); }
    function App(){
      const game = useGame();
      const remaining = Math.max(0, game.MAX - game.attempts.length);
      const locked = game.status!=='playing';
      const showCounts = !game.hard || game.status!=='playing';

      return React.createElement(React.Fragment,null,
        React.createElement('div',{className:'top'},
          React.createElement('div',null,
            React.createElement('h1',null,'Cows & Bulls'),
            React.createElement('div',{className:'sub'},'Guess the 5-digit number in 10 tries. Repeats allowed. First digit can‚Äôt be 0.')
          ),
          React.createElement('label',{className:'toggle',title:'Hard Mode hides the counts until the game ends.'},
            React.createElement('span',null,'Hard Mode'),
            React.createElement('div',{className:'switch '+(game.hard?'on':''), onClick:()=>game.setHard(!game.hard)})
          )
        ),

        React.createElement('div',{className:'inputRow'},
          React.createElement('input',{
            type:'text', inputMode:'numeric', pattern:'\\d*', placeholder:'Enter 5 digits (first ‚â† 0)',
            value:game.input, maxLength:5, disabled:locked,
            onChange:e=>{const v=e.target.value.replace(/[^0-9]/g,'').slice(0,5); e.target.value=v; game.setInput(v);},
            onKeyDown:e=>{if(e.key==='Enter' && !locked){ if(/^\d{5}$/.test(game.input)&&game.input[0]!=='0') game.submit(); }}
          }),
          React.createElement('button',{onClick:game.submit, disabled:locked || !/^\d{5}$/.test(game.input) || game.input[0]==='0'}, 'Submit'),
          React.createElement('button',{className:'ghost', onClick:game.reset}, 'New Game')
        ),

        React.createElement('div',{className:'chips'},
          React.createElement(Chip,null,'Attempts ', React.createElement('strong',null,game.attempts.length,'/',game.MAX)),
          React.createElement(Chip,null,'Remaining ', React.createElement('strong',null,remaining)),
          React.createElement(Chip,null,'First digit ‚â† 0'),
          React.createElement(Chip,null,'Repeats ‚úì'),
          React.createElement(Chip,null,'Rule: cows include bulls')
        ),

        game.attempts.length===0
          ? React.createElement('div',{className:'summary help'},
              React.createElement('div',null,'Type your first guess and press Enter.'),
              React.createElement('ul',null,
                React.createElement('li',null,'You have 10 attempts to get 5 cows and 5 bulls.'),
                React.createElement('li',null,'A üêÑ cow = digit exists anywhere; a üêÇ bull = same digit in the correct place.'),
                React.createElement('li',null,'By design cows ‚â• bulls (bulls are also cows).')
              )
            )
          : null,

        React.createElement('div',{className:'list'},
          game.attempts.map(a=>React.createElement('div',{key:a.idx,className:'rowItem'},
            React.createElement('div',{className:'kbd'},'#',a.idx),
            React.createElement('div',{className:'kbd'},a.guess),
            showCounts
              ? React.createElement('div',null,
                  React.createElement('span',{className:'badge'},'üêÑ Cows ', React.createElement('strong',null,' '+a.cows)),
                  ' ',
                  React.createElement('span',{className:'badge'},'üêÇ Bulls ', React.createElement('strong',null,' '+a.bulls))
                )
              : React.createElement('span',{className:'badge'},'‚Äî hidden ‚Äî')
          ))
        ),

        (game.status!=='playing') && React.createElement('div',{className:'summary'},
          React.createElement('div',{className:game.status==='won'?'win':'lose'},
            game.status==='won' ? 'You cracked it! üéâ' : 'Out of attempts.'
          ),
          React.createElement('div',{className:'help'}, 'Answer: ', React.createElement('strong',null,game.target),
            game.hard ? ' ‚Ä¢ Hard Mode results revealed above.' : '')
        ),

        React.createElement('div',{className:'footer'},
          React.createElement('div',null,'No data collected. Everything runs in your browser.'),
          React.createElement('div',null,'Built for students ‚ú®')
        )
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('app'));
    root.render(React.createElement(App));
  </script>
</body>
</html>
