<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cows & Bulls — 5-Digit</title>
  <style>
    :root{
      --bg:#0e1116; --panel:#151a22; --panel2:#1b222d; --border:#263244;
      --text:#e9edf2; --muted:#a8b3bf; --accent:#4f8cff; --ok:#22c55e; --bad:#ef4444;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      color:var(--text);
      background: radial-gradient(1600px 900px at 70% -10%, #1a2230 0, var(--bg) 60%);
      display:flex; align-items:center; justify-content:center; padding:32px;
    }

    .shell{width:100%; max-width:1400px}
    .card{
      background: linear-gradient(180deg, var(--panel) 0, var(--panel2) 100%);
      border:1px solid var(--border); border-radius:18px; padding:28px;
      box-shadow: 0 16px 60px rgba(0,0,0,.35);
    }

    h1{margin:0 0 6px 0; font-size:34px; letter-spacing:.3px}
    .sub{color:var(--muted); font-size:16px}

    .top{display:flex; align-items:center; justify-content:space-between; gap:16px; margin-bottom:22px}
    .toggle{display:inline-flex; align-items:center; gap:12px; cursor:pointer; user-select:none; font-size:15px}
    .switch{width:50px; height:28px; border-radius:999px; background:#1a2433; border:1px solid #2c3a52; position:relative}
    .switch:after{content:""; position:absolute; top:50%; left:4px; width:20px; height:20px; border-radius:999px; transform:translateY(-50%); background:#cfd7e2; transition:all .2s}
    .switch.on{background:#203353; border-color:#35558f}
    .switch.on:after{left:26px; background:var(--accent)}

    /* TWO-COLUMN LAYOUT */
    .grid{display:grid; grid-template-columns:1.1fr 0.9fr; gap:20px}
    @media (max-width:980px){ .grid{grid-template-columns:1fr} }

    .panel{background:#0f151e; border:1px solid var(--border); border-radius:14px; padding:16px}

    .inputRow{
      display:flex; gap:14px; align-items:center;
      background:#0f151e; border:1px solid var(--border); border-radius:12px; padding:12px;
    }
    input[type="text"]{
      flex:1; font-size:24px; letter-spacing:8px; padding:16px 16px;
      border-radius:12px; border:1px solid #2b3a52; background:#0b1118; color:var(--text); outline:none;
    }
    input[type="text"]:focus{border-color:#3a527a; box-shadow:0 0 0 4px rgba(79,140,255,.14)}
    button{border:0; padding:14px 18px; border-radius:12px; background:var(--accent); color:white; font-weight:700; cursor:pointer; font-size:14px}
    button.ghost{background:transparent; color:var(--text); border:1px solid #2b3a52}
    button[disabled]{opacity:.6; cursor:not-allowed}

    .chips{margin-top:14px; display:flex; gap:10px; flex-wrap:wrap}
    .chip{display:inline-flex; align-items:center; gap:8px; padding:7px 12px; border-radius:999px; background:#0f151e; border:1px solid #27344a; color:var(--muted); font-size:13px}

    .list{border:1px solid var(--border); border-radius:14px; overflow:hidden; background:#0e141d}
    .rowItem{
      display:grid; grid-template-columns:100px 1fr 260px; gap:16px;
      padding:14px 16px; align-items:center; border-top:1px solid #1b2638
    }
    .rowItem:first-child{border-top:none}
    .kbd{font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size:18px}

    /* BIGGER COW/BULL BADGES */
    .badge{
      display:inline-flex; align-items:center; gap:10px; padding:8px 14px;
      border-radius:999px; border:1px solid #2a3a52; background:#0d141c;
      color:var(--muted); font-size:16px
    }
    .badge .icon{font-size:22px; line-height:1}

    .summary{padding:16px; background:#0f151e; border:1px solid #27344a; border-radius:12px}
    .win{color:var(--ok); font-weight:800; letter-spacing:.2px}
    .lose{color:var(--bad); font-weight:800; letter-spacing:.2px}
    .help{color:var(--muted); font-size:14px}

    .footer{margin-top:18px; color:var(--muted); font-size:12px; display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap}

    /* little toast */
    .toast{
      position:fixed; bottom:24px; left:50%; transform:translateX(-50%);
      background:#0f151e; border:1px solid #2a3a52; color:#e9edf2;
      padding:10px 14px; border-radius:10px; font-size:14px; display:none;
      box-shadow:0 8px 30px rgba(0,0,0,.35);
    }
  </style>
</head>
<body>
  <div class="shell">
    <div class="card">
      <div class="top">
        <div>
          <h1>Cows & Bulls</h1>
          <div class="sub">Guess the 5-digit number in 10 tries. Repeats allowed. First digit can’t be 0.</div>
        </div>
        <label class="toggle" title="Hard Mode hides the counts until the game ends.">
          <span>Hard Mode</span>
          <div id="hardSwitch" class="switch"></div>
        </label>
      </div>

      <div class="grid">
        <!-- LEFT: input + rules -->
        <div class="panel">
          <div class="inputRow">
            <input id="guessInput" type="text" inputmode="numeric" pattern="\d*" placeholder="Enter 5 digits (first ≠ 0)" maxlength="5" />
            <button id="submitBtn">Submit</button>
            <button id="newBtn" class="ghost">New Game</button>
          </div>

          <div class="chips" id="chips"></div>

          <div id="intro" class="summary help" style="margin-top:14px;">
            <div>Type your first guess and press Enter.</div>
            <ul>
              <li>You have 10 attempts to get 5 cows and 5 bulls.</li>
              <li>A <strong>cow</strong> = digit exists; a <strong>bull</strong> = same digit in the correct place.</li>
              <li><strong>Cows include bulls</strong> (so cows ≥ bulls).</li>
            </ul>
          </div>

          <div id="endPanel" class="summary" style="margin-top:14px; display:none;"></div>

          <div class="footer" style="margin-top:14px;">
            <div>No data collected. Everything runs in your browser.</div>
            <div>Built for students ✨</div>
          </div>
        </div>

        <!-- RIGHT: attempts list -->
        <div class="panel">
          <div class="list" id="attemptsList"></div>
        </div>
      </div>
    </div>
  </div>

  <div id="toast" class="toast">Copied to clipboard</div>

  <!-- React 18 via CDN -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <script>
    // ---------- Game Logic ----------
    function generateTarget(){
      let s = String(Math.floor(Math.random()*9)+1);
      for(let i=1;i<5;i++) s += String(Math.floor(Math.random()*10));
      return s;
    }
    function countDigits(str){ const m={}; for(const ch of str) m[ch]=(m[ch]||0)+1; return m; }
    // cows include bulls
    function scoreGuess(guess, target){
      const g = guess.split(""), t = target.split("");
      let bulls = 0; for(let i=0;i<5;i++) if(g[i]===t[i]) bulls++;
      const cg=countDigits(guess), ct=countDigits(target);
      let total=0; for(const d in cg) if(ct[d]) total+=Math.min(cg[d],ct[d]);
      return { cows: total, bulls };
    }

    // ---------- Sharing ----------
    function buildShareText({attempts, status, max, target, hard}){
      const header = `Cows & Bulls — 5-digit${hard?' (Hard)':''}\nRule: cows include bulls`;
      const result = status==='won' ? `Result: ${attempts.length}/${max} ✅` : `Result: ${attempts.length}/${max} ❌`;
      const lines = attempts.map(a => {
        // compact attempt line with emojis
        return `${a.guess}  |  🐄 ${a.cows}  🐂 ${a.bulls}`;
      }).join('\n');
      const answer = status==='won' ? `Answer: ${target}` : `Answer: ${target}`;
      const url = location.href;
      return `${header}\n${result}\n\n${lines}\n\n${answer}\n${url}`;
    }
    function copyToClipboard(text){
      if(navigator.clipboard && navigator.clipboard.writeText){
        return navigator.clipboard.writeText(text);
      }
      // fallback
      const ta = document.createElement('textarea');
      ta.value = text; document.body.appendChild(ta);
      ta.select(); document.execCommand('copy'); document.body.removeChild(ta);
      return Promise.resolve();
    }
    function showToast(msg){
      const el = document.getElementById('toast');
      el.textContent = msg || 'Copied to clipboard';
      el.style.display = 'block';
      setTimeout(()=>{ el.style.display='none'; }, 1400);
    }

    // ---------- React UI ----------
    function Chip({children}){ return React.createElement('span',{className:'chip'},children); }
    function Badge({icon,label,value}){
      return React.createElement('span',{className:'badge'},
        React.createElement('span',{className:'icon'},icon),' ',label,' ',
        React.createElement('strong',null,' '+value)
      );
    }

    function App(){
      const [target,setTarget] = React.useState(generateTarget);
      const [attempts,setAttempts] = React.useState([]);
      const [input,setInput] = React.useState("");
      const [hard,setHard] = React.useState(false);
      const [status,setStatus] = React.useState("playing"); // playing | won | lost
      const MAX = 10;

      React.useEffect(()=>{
        const el=document.getElementById('hardSwitch');
        el.className = 'switch'+(hard?' on':'');
      },[hard]);

      const remaining = Math.max(0, MAX - attempts.length);
      const locked = status!=='playing';
      const showCounts = !hard || status!=='playing';

      // Chips render
      React.useEffect(()=>{
        const chips = document.getElementById('chips');
        chips.innerHTML='';
        const root = ReactDOM.createRoot(chips);
        root.render(React.createElement(React.Fragment,null,
          React.createElement(Chip,null,'Attempts ', React.createElement('strong',null,attempts.length,'/',MAX)),
          React.createElement(Chip,null,'Remaining ', React.createElement('strong',null,remaining)),
          React.createElement(Chip,null,'First digit ≠ 0'),
          React.createElement(Chip,null,'Repeats ✓'),
          React.createElement(Chip,null,'Rule: cows include bulls')
        ));
      },[attempts]);

      // Attempts list render
      React.useEffect(()=>{
        const list = document.getElementById('attemptsList');
        list.innerHTML='';
        if(attempts.length===0){
          list.innerHTML='<div style="padding:16px;color:#a8b3bf">Your attempts will appear here.</div>';
          return;
        }
        const container = document.createElement('div');
        attempts.forEach(a=>{
          const row = document.createElement('div');
          row.className='rowItem';
          row.innerHTML = `
            <div class="kbd">#${a.idx}</div>
            <div class="kbd">${a.guess}</div>
            ${showCounts
              ? `<div>
                  <span class="badge"><span class="icon">🐄</span> Cows <strong> ${a.cows}</strong></span>
                  <span class="badge" style="margin-left:8px"><span class="icon">🐂</span> Bulls <strong> ${a.bulls}</strong></span>
                 </div>`
              : `<span class="badge">— hidden —</span>`
            }
          `;
          container.appendChild(row);
        });
        list.appendChild(container);
      },[attempts, showCounts]);

      // End panel + Share button
      React.useEffect(()=>{
        const end = document.getElementById('endPanel');
        if(status==='playing'){ end.style.display='none'; return; }
        end.style.display='block';
        end.innerHTML = `
          <div class="${status==='won'?'win':'lose'}">
            ${status==='won' ? 'You cracked it! 🎉' : 'Out of attempts.'}
          </div>
          <div class="help" style="margin-top:6px">
            Answer: <strong>${target}</strong>${hard?' • Hard Mode results revealed on the right.':''}
          </div>
          <div style="margin-top:10px; display:flex; gap:10px; flex-wrap:wrap">
            <button id="shareBtn">Share Result</button>
            <button id="playAgainBtn" class="ghost">Play Again</button>
          </div>
        `;
        // wire up share + play again
        const shareBtn = document.getElementById('shareBtn');
        const playAgainBtn = document.getElementById('playAgainBtn');
        shareBtn.onclick = async ()=>{
          const text = buildShareText({attempts, status, max: MAX, target, hard});
          try{
            await copyToClipboard(text);
            showToast('Copied results!');
          }catch(e){
            showToast('Copy failed');
          }
        };
        playAgainBtn.onclick = ()=> reset();
      },[status, attempts, target, hard]);

      // Controls wire-up
      React.useEffect(()=>{
        const sw = document.getElementById('hardSwitch');
        sw.onclick = ()=> setHard(h=>!h);
        const inputEl = document.getElementById('guessInput');
        const submitBtn = document.getElementById('submitBtn');
        const newBtn = document.getElementById('newBtn');

        inputEl.value=input;
        inputEl.oninput = (e)=>{
          const v=e.target.value.replace(/[^0-9]/g,'').slice(0,5);
          e.target.value=v; setInput(v);
        };
        inputEl.onkeydown = (e)=>{
          if(e.key==='Enter' && !locked){
            if(/^\d{5}$/.test(inputEl.value) && inputEl.value[0]!=='0') submit();
          }
        };
        submitBtn.onclick = ()=> submit();
        newBtn.onclick = ()=> reset();
      });

      function reset(){
        setTarget(generateTarget()); setAttempts([]); setInput(''); setStatus('playing');
        document.getElementById('guessInput').value='';
      }

      function submit(){
        if(locked) return;
        const v = (document.getElementById('guessInput').value||'').trim();
        if(!/^\d{5}$/.test(v)) return;
        if(v[0]==='0') return;
        const res = scoreGuess(v, target);
        const next = [...attempts, { idx: attempts.length+1, guess: v, ...res }];
        setAttempts(next); setInput(''); document.getElementById('guessInput').value='';
        if(res.bulls===5) setStatus('won'); else if(next.length>=MAX) setStatus('lost');
      }

      return null;
    }

    ReactDOM.createRoot(document.querySelector('.card')).render(React.createElement(App));
  </script>
</body>
</html>
